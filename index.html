htmlDownloadCopy code
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LuxeCart - Premium E-Commerce</title>
    <style>
        /* 
         * ==========================================
         * GLOBAL VARIABLES & RESET
         * ==========================================
         */
        :root {
            --primary-color: #6366f1;
            --primary-hover: #4f46e5;
            --secondary-color: #1e293b;
            --accent-color: #f43f5e;
            --bg-light: #f8fafc;
            --bg-white: #ffffff;
            --text-main: #334155;
            --text-light: #64748b;
            --border-color: #e2e8f0;
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
            --radius: 8px;
            --transition-smooth: cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-light);
            color: var(--text-main);
            line-height: 1.6;
            overflow-x: hidden;
        }

        a {
            text-decoration: none;
            color: inherit;
        }

        ul {
            list-style: none;
        }

        button {
            cursor: pointer;
            border: none;
            font-family: inherit;
        }

        img {
            max-width: 100%;
            display: block;
        }

        /* 
         * ==========================================
         * ANIMATION KEYFRAMES
         * ==========================================
         */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(50px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(100%);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }

            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes pulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.1);
            }
        }

        @keyframes bounce {

            0%,
            20%,
            50%,
            80%,
            100% {
                transform: translateY(0);
            }

            40% {
                transform: translateY(-10px);
            }

            60% {
                transform: translateY(-5px);
            }
        }

        @keyframes shimmer {
            0% {
                background-position: -200% 0;
            }

            100% {
                background-position: 200% 0;
            }
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        @keyframes glow {

            0%,
            100% {
                box-shadow: 0 0 5px rgba(99, 102, 241, 0.4);
            }

            50% {
                box-shadow: 0 0 20px rgba(99, 102, 241, 0.8), 0 0 30px rgba(99, 102, 241, 0.4);
            }
        }

        @keyframes ripple {
            0% {
                transform: scale(0);
                opacity: 1;
            }

            100% {
                transform: scale(4);
                opacity: 0;
            }
        }

        @keyframes shake {

            0%,
            100% {
                transform: translateX(0);
            }

            10%,
            30%,
            50%,
            70%,
            90% {
                transform: translateX(-5px);
            }

            20%,
            40%,
            60%,
            80% {
                transform: translateX(5px);
            }
        }

        @keyframes cartBounce {
            0% {
                transform: scale(1);
            }

            25% {
                transform: scale(1.3) rotate(-5deg);
            }

            50% {
                transform: scale(1.2) rotate(5deg);
            }

            75% {
                transform: scale(1.1) rotate(-3deg);
            }

            100% {
                transform: scale(1) rotate(0);
            }
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes morphBlob {

            0%,
            100% {
                border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%;
            }

            50% {
                border-radius: 30% 60% 70% 40% / 50% 60% 30% 60%;
            }
        }

        /* 
         * ==========================================
         * HEADER & NAVIGATION
         * ==========================================
         */
        header {
            background-color: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: var(--shadow-sm);
            position: sticky;
            top: 0;
            z-index: 100;
            padding: 1rem 2rem;
            animation: slideDown 0.6s var(--transition-smooth);
        }

        .navbar {
            max-width: 1280px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 2rem;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--secondary-color);
            letter-spacing: -0.5px;
            position: relative;
            animation: fadeIn 0.5s ease;
        }

        .logo span {
            color: var(--primary-color);
            display: inline-block;
            transition: transform 0.3s var(--transition-smooth);
        }

        .logo:hover span {
            animation: bounce 0.6s ease;
        }

        .search-container {
            flex: 1;
            max-width: 500px;
            position: relative;
            display: none;
        }

        @media(min-width: 768px) {
            .search-container {
                display: block;
            }
        }

        .search-input {
            width: 100%;
            padding: 0.6rem 1rem 0.6rem 2.5rem;
            border: 1px solid var(--border-color);
            border-radius: 50px;
            font-size: 0.95rem;
            transition: all 0.3s var(--transition-smooth);
            background: var(--bg-light);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary-color);
            background: var(--bg-white);
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.15);
            transform: scale(1.02);
        }

        .search-icon {
            position: absolute;
            left: 14px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-light);
            font-size: 1.1rem;
            transition: transform 0.3s var(--transition-smooth);
        }

        .search-input:focus+.search-icon {
            transform: translateY(-50%) scale(1.1);
            color: var(--primary-color);
        }

        .nav-icons {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .cart-btn {
            position: relative;
            background: none;
            padding: 0.5rem;
            border-radius: 50%;
            transition: all 0.3s var(--transition-smooth);
        }

        .cart-btn:hover {
            background: rgba(99, 102, 241, 0.1);
            transform: scale(1.05);
        }

        .cart-btn:hover svg {
            color: var(--primary-color);
        }

        .cart-count {
            position: absolute;
            top: -2px;
            right: -2px;
            background-color: var(--accent-color);
            color: white;
            font-size: 0.7rem;
            font-weight: bold;
            height: 20px;
            width: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s var(--transition-smooth);
            animation: fadeIn 0.3s ease;
        }

        .cart-btn.active .cart-count {
            animation: cartBounce 0.4s ease;
        }

        .cart-btn svg {
            width: 24px;
            height: 24px;
            color: var(--secondary-color);
            transition: color 0.3s var(--transition-smooth);
        }

        /* 
         * ==========================================
         * HERO SECTION
         * ==========================================
         */
        .hero {
            background: linear-gradient(135deg, #e0e7ff 0%, #fae8ff 50%, #fce7f3 100%);
            padding: 5rem 2rem;
            text-align: center;
            margin-bottom: 3rem;
            border-bottom-left-radius: 30px;
            border-bottom-right-radius: 30px;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.3) 0%, transparent 70%);
            animation: float 8s ease-in-out infinite;
        }

        .hero-content {
            position: relative;
            z-index: 1;
        }

        .hero h1 {
            font-size: 2.5rem;
            color: var(--secondary-color);
            margin-bottom: 1rem;
            animation: fadeInUp 0.8s var(--transition-smooth);
        }

        .hero p {
            color: var(--text-light);
            margin-bottom: 2rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            animation: fadeInUp 0.8s 0.2s var(--transition-smooth) both;
        }

        .cta-btn {
            background-color: var(--primary-color);
            color: white;
            padding: 0.9rem 2.5rem;
            border-radius: 50px;
            font-weight: 600;
            transition: all 0.3s var(--transition-smooth);
            display: inline-block;
            position: relative;
            overflow: hidden;
            animation: fadeInUp 0.8s 0.4s var(--transition-smooth) both;
        }

        .cta-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .cta-btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .cta-btn:hover {
            background-color: var(--primary-hover);
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 10px 30px rgba(99, 102, 241, 0.4);
        }

        .cta-btn:active {
            transform: translateY(-1px) scale(0.98);
        }

        /* 
         * ==========================================
         * MAIN LAYOUT (SIDEBAR + GRID)
         * ==========================================
         */
        .container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 2rem 4rem;
            display: grid;
            grid-template-columns: 260px 1fr;
            gap: 2.5rem;
        }

        /* Sidebar */
        .sidebar {
            background: var(--bg-white);
            padding: 1.5rem;
            border-radius: 16px;
            height: fit-content;
            box-shadow: var(--shadow-sm);
            position: sticky;
            top: 100px;
            animation: slideInLeft 0.6s var(--transition-smooth);
        }

        .filter-group {
            margin-bottom: 2rem;
        }

        .filter-group:last-child {
            margin-bottom: 0;
        }

        .filter-title {
            font-size: 0.9rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--secondary-color);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            padding-bottom: 0.5rem;
        }

        .filter-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 30px;
            height: 2px;
            background: var(--primary-color);
            border-radius: 2px;
        }

        .filter-option {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 0.5rem;
            color: var(--text-light);
            cursor: pointer;
            padding: 0.5rem 0.75rem;
            border-radius: var(--radius);
            transition: all 0.2s var(--transition-smooth);
            position: relative;
            overflow: hidden;
        }

        .filter-option::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 3px;
            background: var(--primary-color);
            transform: scaleY(0);
            transition: transform 0.3s var(--transition-smooth);
        }

        .filter-option:hover,
        .filter-option.active {
            color: var(--primary-color);
            background: rgba(99, 102, 241, 0.05);
        }

        .filter-option.active::before {
            transform: scaleY(1);
        }

        .filter-option input {
            accent-color: var(--primary-color);
            width: 16px;
            height: 16px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .filter-option:hover input {
            transform: scale(1.1);
        }

        /* Product Grid */
        .main-content {
            width: 100%;
        }

        .toolbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-color);
            animation: fadeIn 0.5s 0.3s both;
        }

        .results-count {
            color: var(--text-light);
            font-size: 0.95rem;
        }

        .sort-select {
            padding: 0.6rem 1.2rem;
            border: 1px solid var(--border-color);
            border-radius: 50px;
            background: var(--bg-white);
            color: var(--text-main);
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s var(--transition-smooth);
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%2364748b' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10l-5 5z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 1rem center;
            padding-right: 2.5rem;
        }

        .sort-select:hover {
            border-color: var(--primary-color);
        }

        .sort-select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
            gap: 2rem;
        }

        /* Product Card */
        .product-card {
            background: var(--bg-white);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: var(--shadow-sm);
            transition: all 0.4s var(--transition-smooth);
            display: flex;
            flex-direction: column;
            position: relative;
            opacity: 0;
            animation: fadeInUp 0.6s var(--transition-smooth) forwards;
        }

        /* Stagger animation for products */
        .product-card:nth-child(1) {
            animation-delay: 0.1s;
        }

        .product-card:nth-child(2) {
            animation-delay: 0.15s;
        }

        .product-card:nth-child(3) {
            animation-delay: 0.2s;
        }

        .product-card:nth-child(4) {
            animation-delay: 0.25s;
        }

        .product-card:nth-child(5) {
            animation-delay: 0.3s;
        }

        .product-card:nth-child(6) {
            animation-delay: 0.35s;
        }

        .product-card:nth-child(7) {
            animation-delay: 0.4s;
        }

        .product-card:nth-child(8) {
            animation-delay: 0.45s;
        }

        .product-card:hover {
            transform: translateY(-8px) scale(1.01);
            box-shadow: var(--shadow-xl);
        }

        .card-image {
            height: 220px;
            background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
            overflow: hidden;
            position: relative;
        }

        .card-image::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.5s;
        }

        .product-card:hover .card-image::after {
            left: 100%;
        }

        .card-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .product-card:hover .card-image img {
            transform: scale(1.12);
        }

        .badge {
            position: absolute;
            top: 12px;
            left: 12px;
            background: var(--accent-color);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            z-index: 2;
            animation: scaleIn 0.4s 0.2s both;
        }

        .wishlist-btn {
            position: absolute;
            top: 12px;
            right: 12px;
            width: 36px;
            height: 36px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transform: translateX(20px);
            transition: all 0.3s var(--transition-smooth);
            z-index: 2;
            box-shadow: var(--shadow-md);
        }

        .product-card:hover .wishlist-btn {
            opacity: 1;
            transform: translateX(0);
        }

        .wishlist-btn:hover {
            background: var(--accent-color);
            color: white;
            transform: scale(1.1);
        }

        .quick-view {
            position: absolute;
            bottom: 15px;
            left: 50%;
            transform: translateX(-50%) translateY(30px);
            background: rgba(255, 255, 255, 0.95);
            padding: 0.6rem 1.5rem;
            border-radius: 25px;
            font-size: 0.85rem;
            font-weight: 600;
            opacity: 0;
            transition: all 0.4s var(--transition-smooth);
            cursor: pointer;
            color: var(--secondary-color);
            box-shadow: var(--shadow-md);
            z-index: 3;
        }

        .product-card:hover .quick-view {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        .quick-view:hover {
            background: var(--primary-color);
            color: white;
        }

        .card-details {
            padding: 1.25rem;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .category {
            font-size: 0.75rem;
            text-transform: uppercase;
            color: var(--text-light);
            font-weight: 600;
            letter-spacing: 0.5px;
            margin-bottom: 0.5rem;
            display: inline-block;
            transition: color 0.3s;
        }

        .product-title {
            font-size: 1.05rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: var(--secondary-color);
            line-height: 1.4;
            transition: color 0.3s;
        }

        .product-card:hover .product-title {
            color: var(--primary-color);
        }

        .rating {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            margin-bottom: 1rem;
            font-size: 0.9rem;
            color: #f59e0b;
        }

        .rating span {
            color: var(--text-light);
            font-size: 0.8rem;
            margin-left: 0.5rem;
        }

        .price-row {
            margin-top: auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .price {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--primary-color);
            position: relative;
        }

        .add-btn {
            background: var(--secondary-color);
            color: white;
            border-radius: 50%;
            width: 42px;
            height: 42px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s var(--transition-smooth);
            position: relative;
            overflow: hidden;
        }

        .add-btn::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.3) 0%, transparent 70%);
            transform: scale(0);
            opacity: 0;
            transition: transform 0.5s, opacity 0.5s;
        }

        .add-btn:hover::after {
            transform: scale(1.5);
            opacity: 1;
        }

        .add-btn:hover {
            background: var(--primary-color);
            transform: scale(1.1) rotate(90deg);
            box-shadow: 0 5px 20px rgba(99, 102, 241, 0.4);
        }

        .add-btn:active {
            transform: scale(0.95);
        }

        /* 
         * ==========================================
         * MODALS
         * ==========================================
         */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(4px);
            display: flex;
            justify-content: flex-end;
            z-index: 200;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s var(--transition-smooth);
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-container {
            background: var(--bg-white);
            width: 100%;
            max-width: 480px;
            height: 100%;
            padding: 2rem;
            transform: translateX(100%);
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }

        .modal-overlay.active .modal-container {
            transform: translateX(0);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1.25rem;
            border-bottom: 1px solid var(--border-color);
            animation: slideDown 0.4s var(--transition-smooth);
        }

        .modal-header h2 {
            font-size: 1.5rem;
            color: var(--secondary-color);
        }

        .close-modal {
            background: var(--bg-light);
            border: none;
            font-size: 1.75rem;
            color: var(--text-light);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s var(--transition-smooth);
        }

        .close-modal:hover {
            background: var(--accent-color);
            color: white;
            transform: rotate(90deg);
        }

        /* Cart Specifics */
        .cart-items {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 1rem;
            padding-right: 0.5rem;
        }

        /* Custom scrollbar for cart */
        .cart-items::-webkit-scrollbar {
            width: 6px;
        }

        .cart-items::-webkit-scrollbar-track {
            background: var(--bg-light);
            border-radius: 3px;
        }

        .cart-items::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 3px;
        }

        .cart-items::-webkit-scrollbar-thumb:hover {
            background: var(--text-light);
        }

        .cart-item {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.25rem;
            padding: 1rem;
            background: var(--bg-light);
            border-radius: var(--radius);
            animation: slideInRight 0.4s var(--transition-smooth);
            transition: all 0.3s;
            position: relative;
        }

        .cart-item:hover {
            box-shadow: var(--shadow-md);
        }

        .cart-item.removing {
            animation: slideInRight 0.3s reverse both;
            opacity: 0;
            transform: translateX(50px);
        }

        .cart-item.adding {
            animation: pulse 0.4s ease;
            background: rgba(99, 102, 241, 0.1);
        }

        .cart-item-img {
            width: 85px;
            height: 85px;
            border-radius: 8px;
            object-fit: cover;
            background: white;
            transition: transform 0.3s;
        }

        .cart-item:hover .cart-item-img {
            transform: scale(1.05);
        }

        .cart-item-details {
            flex: 1;
        }

        .cart-item-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
            color: var(--secondary-color);
            font-size: 0.95rem;
        }

        .cart-item-price {
            color: var(--primary-color);
            font-weight: 700;
            font-size: 1rem;
        }

        .qty-controls {
            display: flex;
            align-items: center;
            gap: 0;
            margin-top: 0.75rem;
            width: fit-content;
            background: white;
            border-radius: 50px;
            overflow: hidden;
            box-shadow: var(--shadow-sm);
        }

        .qty-btn {
            padding: 0.4rem 0.8rem;
            background: var(--bg-light);
            font-size: 1rem;
            color: var(--text-main);
            transition: all 0.2s;
        }

        .qty-btn:hover {
            background: var(--primary-color);
            color: white;
        }

        .qty-btn:active {
            transform: scale(0.95);
        }

        .qty-display {
            padding: 0.4rem 1rem;
            font-weight: 600;
            min-width: 35px;
            text-align: center;
        }

        .remove-item {
            color: var(--accent-color);
            font-size: 0.8rem;
            background: none;
            padding: 0.25rem 0;
            position: relative;
            overflow: hidden;
            transition: color 0.3s;
        }

        .remove-item::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 1px;
            background: var(--accent-color);
            transition: width 0.3s;
        }

        .remove-item:hover::after {
            width: 100%;
        }

        .cart-summary {
            border-top: 1px solid var(--border-color);
            padding-top: 1.5rem;
            animation: slideUp 0.4s 0.2s both;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .total-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1.25rem;
            font-weight: 700;
            font-size: 1.3rem;
            color: var(--secondary-color);
        }

        .total-row span:last-child {
            color: var(--primary-color);
        }

        .checkout-btn {
            width: 100%;
            padding: 1rem;
            background: linear-gradient(135deg, var(--primary-color), var(--primary-hover));
            color: white;
            font-weight: 600;
            font-size: 1.05rem;
            border-radius: 12px;
            margin-top: 1rem;
            transition: all 0.3s var(--transition-smooth);
            position: relative;
            overflow: hidden;
        }

        .checkout-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .checkout-btn:hover::before {
            left: 100%;
        }

        .checkout-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(99, 102, 241, 0.4);
        }

        .checkout-btn:active {
            transform: translateY(0);
        }

        .empty-cart {
            text-align: center;
            padding: 3rem 1rem;
            animation: fadeIn 0.5s;
        }

        .empty-cart svg {
            width: 80px;
            height: 80px;
            color: var(--border-color);
            margin-bottom: 1rem;
            animation: float 3s ease-in-out infinite;
        }

        /* Product Detail Modal */
        .detail-modal .modal-container {
            max-width: 900px;
            justify-content: flex-start;
            transform: translateY(100%);
        }

        .detail-modal.active .modal-container {
            transform: translateY(0);
        }

        .detail-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2.5rem;
            animation: scaleIn 0.4s 0.1s both;
        }

        @media(max-width: 768px) {
            .detail-layout {
                grid-template-columns: 1fr;
            }

            .container {
                grid-template-columns: 1fr;
                padding: 0 1rem 2rem;
            }
        }

        .detail-image {
            position: relative;
            border-radius: 16px;
            overflow: hidden;
        }

        .detail-image img {
            width: 100%;
            height: auto;
            transition: transform 0.5s;
        }

        .detail-image:hover img {
            transform: scale(1.05);
        }

        .detail-info h2 {
            font-size: 1.75rem;
            margin-bottom: 0.75rem;
            color: var(--secondary-color);
            line-height: 1.3;
        }

        .detail-price {
            font-size: 1.75rem;
            color: var(--primary-color);
            font-weight: 700;
            margin-bottom: 1.5rem;
            display: inline-block;
            animation: glow 2s ease-in-out infinite;
        }

        .detail-desc {
            color: var(--text-light);
            margin-bottom: 2rem;
            line-height: 1.7;
        }

        .detail-meta {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-light);
            font-size: 0.9rem;
        }

        .add-to-cart-lg {
            width: 100%;
            padding: 1rem 2rem;
            background: var(--secondary-color);
            color: white;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 12px;
            transition: all 0.3s var(--transition-smooth);
        }

        .add-to-cart-lg:hover {
            background: var(--primary-color);
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(99, 102, 241, 0.3);
        }

        /* Checkout Form */
        .form-group {
            margin-bottom: 1.25rem;
            position: relative;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--secondary-color);
            font-size: 0.9rem;
            transition: color 0.3s;
        }

        .form-input {
            width: 100%;
            padding: 0.85rem 1rem;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s var(--transition-smooth);
            background: var(--bg-light);
        }

        .form-input:hover {
            border-color: #cbd5e1;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary-color);
            background: white;
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1);
            transform: translateY(-1px);
        }

        .form-input.error {
            border-color: var(--accent-color);
            animation: shake 0.5s ease;
        }

        .error-msg {
            color: var(--accent-color);
            font-size: 0.8rem;
            margin-top: 0.35rem;
            display: none;
            animation: slideDown 0.3s;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .primary-btn {
            width: 100%;
            padding: 1rem;
            background: linear-gradient(135deg, var(--primary-color), var(--primary-hover));
            color: white;
            font-weight: 600;
            font-size: 1.05rem;
            border-radius: 12px;
            margin-top: 1.5rem;
            transition: all 0.3s var(--transition-smooth);
        }

        .primary-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(99, 102, 241, 0.4);
        }

        .primary-btn:active {
            transform: translateY(0);
        }

        .primary-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }

        /* Footer */
        footer {
            background: var(--secondary-color);
            color: #94a3b8;
            padding: 3rem 2rem;
            margin-top: 4rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-color), var(--accent-color), var(--primary-color));
            background-size: 200% 100%;
            animation: shimmer 3s linear infinite;
        }

        footer p {
            position: relative;
            z-index: 1;
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: var(--secondary-color);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 10px;
            box-shadow: var(--shadow-xl);
            display: flex;
            align-items: center;
            gap: 0.75rem;
            transform: translateX(150%);
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 300;
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast.success {
            background: linear-gradient(135deg, #10b981, #059669);
        }

        .toast-icon {
            width: 24px;
            height: 24px;
        }

        /* Responsive Utilities */
        @media(max-width: 900px) {
            .sidebar {
                display: none;
                /* In a real app, this would be a collapsible drawer */
            }
        }

        @media(max-width: 600px) {
            .hero h1 {
                font-size: 1.75rem;
            }

            .hero {
                padding: 3rem 1rem;
            }

            .product-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
                gap: 1rem;
            }

            .modal-container {
                max-width: 100%;
            }
        }
    </style>
</head>

<body>

    <!-- HEADER -->
    <header>
        <nav class="navbar">
            <a href="#" class="logo">Luxe<span>Cart</span></a>

            <div class="search-container">
                <input type="text" id="searchInput" class="search-input"
                    placeholder="Search products, brands and more...">
                <span class="search-icon">üîç</span>
            </div>

            <div class="nav-icons">
                <button id="cartBtn" class="cart-btn" aria-label="Open Cart">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119 1.007zM8.625 10.5a.375.375 0 11-.75 0 .375.375 0 01.75 0zm7.5 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
                    </svg>
                    <span id="cartCount" class="cart-count">0</span>
                </button>
            </div>
        </nav>
    </header>

    <!-- HERO SECTION -->
    <section class="hero">
        <div class="hero-content">
            <h1>Upgrade Your Lifestyle</h1>
            <p>Discover the latest trends in electronics, fashion, and home decor. Curated for quality and designed for
                you.</p>
            <a href="#products" class="cta-btn">Shop Now</a>
        </div>
    </section>

    <!-- MAIN CONTENT -->
    <div class="container" id="products">

        <!-- Sidebar Filters -->
        <aside class="sidebar">
            <div class="filter-group">
                <h3 class="filter-title">Categories</h3>
                <div id="categoryList">
                    <!-- Populated by JS -->
                </div>
            </div>

            <div class="filter-group">
                <h3 class="filter-title">Sort By</h3>
                <div class="filter-option" onclick="sortProducts('low')">
                    <input type="radio" name="sort"> Price: Low to High
                </div>
                <div class="filter-option" onclick="sortProducts('high')">
                    <input type="radio" name="sort"> Price: High to Low
                </div>
                <div class="filter-option" onclick="sortProducts('new')">
                    <input type="radio" name="sort"> Newest Arrivals
                </div>
            </div>
        </aside>

        <!-- Product Grid Area -->
        <main class="main-content">
            <div class="toolbar">
                <span id="resultCount" class="results-count">Showing all products</span>
                <select id="sortSelect" class="sort-select" onchange="handleSortChange(this.value)">
                    <option value="default">Sort by: Featured</option>
                    <option value="low">Price: Low to High</option>
                    <option value="high">Price: High to Low</option>
                    <option value="new">Newest Arrivals</option>
                </select>
            </div>

            <div id="productGrid" class="product-grid">
                <!-- Products Injected Here -->
            </div>
        </main>
    </div>

    <!-- CART MODAL -->
    <div id="cartModal" class="modal-overlay">
        <div class="modal-container">
            <div class="modal-header">
                <h2>Your Shopping Cart</h2>
                <button class="close-modal" onclick="toggleCart()">√ó</button>
            </div>

            <div id="cartItemsContainer" class="cart-items">
                <div class="empty-cart">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                            d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                    </svg>
                    <p style="color: var(--text-light);">Your cart is empty.</p>
                </div>
            </div>

            <div class="cart-summary">
                <div class="total-row">
                    <span>Total</span>
                    <span id="cartTotal">$0.00</span>
                </div>
                <button class="checkout-btn" onclick="openCheckout()">Proceed to Checkout</button>
            </div>
        </div>
    </div>

    <!-- PRODUCT DETAIL MODAL -->
    <div id="detailModal" class="modal-overlay detail-modal">
        <div class="modal-container">
            <div class="modal-header">
                <h2>Product Details</h2>
                <button class="close-modal" onclick="closeDetail()">√ó</button>
            </div>
            <div id="detailContent" class="detail-layout">
                <!-- Content Injected via JS -->
            </div>
        </div>
    </div>

    <!-- CHECKOUT MODAL -->
    <div id="checkoutModal" class="modal-overlay">
        <div class="modal-container">
            <div class="modal-header">
                <h2>Checkout</h2>
                <button class="close-modal" onclick="closeCheckout()">√ó</button>
            </div>

            <form id="checkoutForm" onsubmit="processPayment(event)">
                <div class="form-group">
                    <label class="form-label">Full Name</label>
                    <input type="text" id="fullName" class="form-input" placeholder="John Doe">
                    <span class="error-msg">Please enter your name</span>
                </div>

                <div class="form-group">
                    <label class="form-label">Email Address</label>
                    <input type="email" id="email" class="form-input" placeholder="john@example.com">
                    <span class="error-msg">Please enter a valid email</span>
                </div>

                <div class="form-group">
                    <label class="form-label">Card Number</label>
                    <input type="text" id="cardNumber" class="form-input" placeholder="0000 0000 0000 0000"
                        maxlength="19">
                    <span class="error-msg">Invalid card number</span>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Expiry</label>
                        <input type="text" id="expiry" class="form-input" placeholder="MM/YY" maxlength="5">
                        <span class="error-msg">Required</span>
                    </div>
                    <div class="form-group">
                        <label class="form-label">CVC</label>
                        <input type="text" id="cvc" class="form-input" placeholder="123" maxlength="3">
                        <span class="error-msg">Required</span>
                    </div>
                </div>

                <div class="total-row"
                    style="margin-top: 2rem; border-top: 1px solid var(--border-color); padding-top:1rem;">
                    <span>Payable Amount</span>
                    <span id="checkoutTotal">$0.00</span>
                </div>

                <button type="submit" class="primary-btn">Pay Now</button>
                <button type="button" onclick="closeCheckout(); openCart();"
                    style="background:none; width:100%; margin-top:1rem; color:var(--text-light); border:none; font-size:0.9rem; cursor:pointer;">‚Üê
                    Back to Cart</button>
            </form>
        </div>
    </div>

    <!-- TOAST NOTIFICATION -->
    <div id="toast" class="toast">
        <svg class="toast-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
        </svg>
        <span id="toastMessage">Item added to cart!</span>
    </div>

    <!-- FOOTER -->
    <footer>
        <p>&copy; 2026 LuxeCart. All rights reserved.</p>
        <p style="font-size: 0.8rem; margin-top:0.5rem; color: #64748b;">Premium E-Commerce Experience</p>
    </footer>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        /* 
         * ==========================================
         * MOCK DATA
         * ==========================================
         */
        const products = [
            {
                id: 1,
                name: "Wireless Noise Cancelling Headphones",
                category: "Electronics",
                price: 299.99,
                image: "https://images.unsplash.com/photo-1505740420928-5e560c06d30e?auto=format&fit=crop&w=500&q=80",
                description: "Experience immersive sound with our premium noise-cancelling headphones. 30-hour battery life, plush ear cushions, and crystal clear calls.",
                rating: 4.8,
                badge: "Best Seller"
            },
            {
                id: 2,
                name: "Minimalist Leather Watch",
                category: "Accessories",
                price: 149.50,
                image: "https://images.unsplash.com/photo-1523275335684-37898b6baf30?auto=format&fit=crop&w=500&q=80",
                description: "Elegant timepiece featuring a Swiss movement and genuine Italian leather strap. Water-resistant up to 50 meters.",
                rating: 4.6
            },
            {
                id: 3,
                name: "Smart Fitness Tracker",
                category: "Electronics",
                price: 89.99,
                image: "https://images.unsplash.com/photo-1576243345690-45c7c448c999?auto=format&fit=crop&w=500&q=80",
                description: "Track your steps, heart rate, and sleep patterns. Compatible with iOS and Android. 7-day battery life.",
                rating: 4.4,
                badge: "New"
            },
            {
                id: 4,
                name: "Vintage Denim Jacket",
                category: "Fashion",
                price: 120.00,
                image: "https://images.unsplash.com/photo-1523381210434-271e8be1f52b?auto=format&fit=crop&w=500&q=80",
                description: "Classic denim jacket with a modern fit. Made from sustainable cotton. Features chest pockets and button closure.",
                rating: 4.7
            },
            {
                id: 5,
                name: "Ceramic Coffee Mug Set",
                category: "Home",
                price: 35.00,
                image: "https://images.unsplash.com/photo-1514228742587-6b1558fcca3d?auto=format&fit=crop&w=500&q=80",
                description: "Set of 4 handmade ceramic mugs. Microwave and dishwasher safe. Available in earthy tones.",
                rating: 4.9
            },
            {
                id: 6,
                name: "Mechanical Gaming Keyboard",
                category: "Electronics",
                price: 135.00,
                image: "https://images.unsplash.com/photo-1587829741301-dc798b91add1?auto=format&fit=crop&w=500&q=80",
                description: "RGB backlit mechanical keyboard with tactile switches. N-key rollover and programmable macros.",
                rating: 4.8
            },
            {
                id: 7,
                name: "Running Shoes Ultra",
                category: "Fashion",
                price: 110.00,
                image: "https://images.unsplash.com/photo-1542291026-7eec264c27ff?auto=format&fit=crop&w=500&q=80",
                description: "Lightweight and breathable running shoes designed for long-distance comfort. Responsive cushioning.",
                rating: 4.5,
                badge: "Sale"
            },
            {
                id: 8,
                name: "Bamboo Desk Lamp",
                category: "Home",
                price: 45.00,
                image: "https://images.unsplash.com/photo-1507473888900-52e108d38db8?auto=format&fit=crop&w=500&q=80",
                description: "Eco-friendly desk lamp with adjustable brightness levels. Touch control and USB charging port included.",
                rating: 4.3
            }
        ];

        // State
        let cart = [];
        let currentCategory = 'all';
        let currentSort = 'default';
        let searchQuery = '';

        /* 
         * ==========================================
         * INITIALIZATION
         * ==========================================
         */
        document.addEventListener('DOMContentLoaded', () => {
            renderCategories();
            renderProducts();
            setupEventListeners();
        });

        function setupEventListeners() {
            // Search with debounce
            let searchTimeout;
            document.getElementById('searchInput').addEventListener('input', (e) => {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(() => {
                    searchQuery = e.target.value.toLowerCase();
                    renderProducts();
                }, 300);
            });

            // Cart Button
            document.getElementById('cartBtn').addEventListener('click', () => {
                toggleCart();
            });

            // Close modals on overlay click
            document.querySelectorAll('.modal-overlay').forEach(overlay => {
                overlay.addEventListener('click', (e) => {
                    if (e.target === overlay) {
                        overlay.classList.remove('active');
                    }
                });
            });

            // Card Number Formatting
            document.getElementById('cardNumber').addEventListener('input', function (e) {
                let value = e.target.value.replace(/\D/g, '');
                value = value.replace(/(.{4})/g, '$1 ').trim();
                e.target.value = value;
            });

            // Expiry formatting
            document.getElementById('expiry').addEventListener('input', function (e) {
                let value = e.target.value.replace(/\D/g, '');
                if (value.length >= 2) {
                    value = value.substring(0, 2) + '/' + value.substring(2);
                }
                e.target.value = value;
            });
        }

        /* 
         * ==========================================
         * RENDERING FUNCTIONS
         * ==========================================
         */
        function renderCategories() {
            const categories = ['all', ...new Set(products.map(p => p.category))];
            const container = document.getElementById('categoryList');
            container.innerHTML = categories.map(cat => `
                <div class="filter-option ${cat === 'all' ? 'active' : ''}" onclick="filterCategory('${cat}', this)">
                    <input type="radio" name="category" ${cat === 'all' ? 'checked' : ''}>
                    ${cat === 'all' ? 'All Products' : cat}
                </div>
            `).join('');
        }

        function renderProducts() {
            let filtered = products.filter(p => {
                const matchesCat = currentCategory === 'all' || p.category === currentCategory;
                const matchesSearch = p.name.toLowerCase().includes(searchQuery) ||
                    p.category.toLowerCase().includes(searchQuery);
                return matchesCat && matchesSearch;
            });

            if (currentSort === 'low') filtered.sort((a, b) => a.price - b.price);
            if (currentSort === 'high') filtered.sort((a, b) => b.price - a.price);
            if (currentSort === 'new') filtered.sort((a, b) => b.id - a.id);

            const grid = document.getElementById('productGrid');
            document.getElementById('resultCount').innerText = `Showing ${filtered.length} products`;

            if (filtered.length === 0) {
                grid.innerHTML = `
                    <div style="grid-column: 1/-1; text-align: center; padding: 3rem; color: var(--text-light);">
                        <p>No products found matching your criteria.</p>
                    </div>
                `;
                return;
            }

            grid.innerHTML = filtered.map((p, index) => `
                <div class="product-card" style="animation-delay: ${index * 0.1}s">
                    <div class="card-image">
                        ${p.badge ? `<span class="badge">${p.badge}</span>` : ''}
                        <button class="wishlist-btn" onclick="addToWishlist(${p.id}, this)">
                            <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path></svg>
                        </button>
                        <img src="${p.image}" alt="${p.name}" loading="lazy">
                        <div class="quick-view" onclick="viewDetails(${p.id})">Quick View</div>
                    </div>
                    <div class="card-details">
                        <div class="category">${p.category}</div>
                        <h3 class="product-title">${p.name}</h3>
                        <div class="rating">
                            ${'‚òÖ'.repeat(Math.floor(p.rating))}${'‚òÜ'.repeat(5 - Math.floor(p.rating))}
                            <span>(${p.rating})</span>
                        </div>
                        <div class="price-row">
                            <span class="price">$${p.price.toFixed(2)}</span>
                            <button class="add-btn" onclick="addToCart(${p.id})" aria-label="Add to cart">
                                <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        /* 
         * ==========================================
         * FILTER & SORT LOGIC
         * ==========================================
         */
        function filterCategory(category, element) {
            currentCategory = category;

            // UI Update with animation
            document.querySelectorAll('.filter-option').forEach(el => el.classList.remove('active'));
            element.classList.add('active');

            // Animate grid out and back in
            const grid = document.getElementById('productGrid');
            grid.style.opacity = '0';
            grid.style.transform = 'translateY(10px)';

            setTimeout(() => {
                renderProducts();
                grid.style.transition = 'all 0.3s ease';
                grid.style.opacity = '1';
                grid.style.transform = 'translateY(0)';
            }, 150);
        }

        function sortProducts(type) {
            currentSort = type;
            renderProducts();
        }

        function handleSortChange(value) {
            currentSort = value;
            renderProducts();
        }

        /* 
         * ==========================================
         * CART LOGIC
         * ==========================================
         */
        function addToCart(id) {
            const product = products.find(p => p.id === id);
            const existing = cart.find(item => item.id === id);

            if (existing) {
                existing.qty++;
            } else {
                cart.push({ ...product, qty: 1 });
            }

            updateCartUI();

            // Visual feedback on cart button
            const badge = document.getElementById('cartCount');
            badge.parentElement.classList.add('active');
            setTimeout(() => badge.parentElement.classList.remove('active'), 400);

            showToast(`${product.name.substring(0, 20)}... added to cart!`);
        }

        function removeFromCart(id) {
            const itemElement = document.querySelector(`[data-cart-id="${id}"]`);
            if (itemElement) {
                itemElement.classList.add('removing');
                setTimeout(() => {
                    cart = cart.filter(item => item.id !== id);
                    updateCartUI();
                }, 300);
            } else {
                cart = cart.filter(item => item.id !== id);
                updateCartUI();
            }
        }

        function updateQty(id, change) {
            const item = cart.find(i => i.id === id);
            if (item) {
                item.qty += change;
                if (item.qty <= 0) removeFromCart(id);
                else {
                    updateCartUI();
                    // Add pulse animation to updated item
                    const itemEl = document.querySelector(`[data-cart-id="${id}"]`);
                    if (itemEl) {
                        itemEl.classList.add('adding');
                        setTimeout(() => itemEl.classList.remove('adding'), 400);
                    }
                }
            }
        }

        function updateCartUI() {
            // Update Count
            const count = cart.reduce((acc, item) => acc + item.qty, 0);

            // Animate count change
            const countEl = document.getElementById('cartCount');
            countEl.style.transform = 'scale(1.2)';
            setTimeout(() => countEl.style.transform = 'scale(1)', 200);
            countEl.innerText = count;

            // Update List
            const container = document.getElementById('cartItemsContainer');

            if (cart.length === 0) {
                container.innerHTML = `
                    <div class="empty-cart">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                        </svg>
                        <p style="color: var(--text-light);">Your cart is empty.</p>
                    </div>
                `;
                document.getElementById('cartTotal').innerText = '$0.00';
                return;
            }

            let total = 0;
            container.innerHTML = cart.map(item => {
                total += item.price * item.qty;
                return `
                    <div class="cart-item" data-cart-id="${item.id}">
                        <img src="${item.image}" class="cart-item-img" alt="${item.name}">
                        <div class="cart-item-details">
                            <div class="cart-item-title">${item.name}</div>
                            <div class="cart-item-price">$${item.price.toFixed(2)}</div>
                            <div class="qty-controls">
                                <button class="qty-btn" onclick="updateQty(${item.id}, -1)">-</button>
                                <span class="qty-display">${item.qty}</span>
                                <button class="qty-btn" onclick="updateQty(${item.id}, 1)">+</button>
                            </div>
                        </div>
                        <button class="remove-item" onclick="removeFromCart(${item.id})">Remove</button>
                    </div>
                `;
            }).join('');

            // Animate total update
            const totalEl = document.getElementById('cartTotal');
            totalEl.style.opacity = '0';
            setTimeout(() => {
                totalEl.innerText = '$' + total.toFixed(2);
                totalEl.style.transition = 'opacity 0.3s';
                totalEl.style.opacity = '1';
            }, 150);
        }

        function toggleCart(forceOpen = false) {
            const modal = document.getElementById('cartModal');
            if (forceOpen) {
                modal.classList.add('active');
                document.getElementById('detailModal').classList.remove('active');
                document.getElementById('checkoutModal').classList.remove('active');
            } else {
                modal.classList.toggle('active');
            }
        }

        /* 
         * ==========================================
         * PRODUCT DETAILS LOGIC
         * ==========================================
         */
        function viewDetails(id) {
            const product = products.find(p => p.id === id);
            const content = document.getElementById('detailContent');

            content.innerHTML = `
                <div class="detail-image">
                    <img src="${product.image}" alt="${product.name}">
                </div>
                <div class="detail-info">
                    <div class="category">${product.category}</div>
                    <h2>${product.name}</h2>
                    <div class="detail-price">$${product.price.toFixed(2)}</div>
                    <p class="detail-desc">${product.description}</p>
                    
                    <div class="detail-meta">
                        <div class="meta-item">
                            <span>‚≠ê</span> ${product.rating} Rating
                        </div>
                        <div class="meta-item">
                            <span>üì¶</span> Free Shipping
                        </div>
                    </div>

                    <div style="margin-top:2rem;">
                        <label class="form-label">Quantity</label>
                        <div class="qty-controls" style="width: fit-content; margin-bottom: 1.5rem;">
                            <button class="qty-btn" onclick="this.nextElementSibling.stepDown()">-</button>
                            <input type="number" value="1" min="1" max="10" class="qty-display" id="detailQty" style="border:none; width:50px; text-align:center; background:transparent;">
                            <button class="qty-btn" onclick="this.previousElementSibling.stepUp()">+</button>
                        </div>
                    </div>

                    <button class="add-to-cart-lg" onclick="addDetailToCart(${product.id})">Add to Cart</button>
                </div>
            `;

            document.getElementById('detailModal').classList.add('active');
            document.getElementById('cartModal').classList.remove('active');
        }

        function addDetailToCart(id) {
            const qtyInput = document.getElementById('detailQty');
            let qty = parseInt(qtyInput.value) || 1;

            const product = products.find(p => p.id === id);
            const existing = cart.find(item => item.id === id);

            if (existing) {
                existing.qty += qty;
            } else {
                cart.push({ ...product, qty: qty });
            }

            updateCartUI();
            closeDetail();
            showToast('Item added to cart!');
            setTimeout(() => toggleCart(true), 300);
        }

        function closeDetail() {
            document.getElementById('detailModal').classList.remove('active');
        }

        /* 
         * ==========================================
         * CHECKOUT LOGIC
         * ==========================================
         */
        function openCheckout() {
            if (cart.length === 0) {
                showToast('Cart is empty!', 'error');
                return;
            }

            document.getElementById('cartModal').classList.remove('active');
            document.getElementById('checkoutModal').classList.add('active');

            const total = cart.reduce((acc, item) => acc + (item.price * item.qty), 0);
            document.getElementById('checkoutTotal').innerText = '$' + total.toFixed(2);
        }

        function closeCheckout() {
            document.getElementById('checkoutModal').classList.remove('active');
        }

        function openCart() {
            document.getElementById('checkoutModal').classList.remove('active');
            document.getElementById('cartModal').classList.add('active');
        }

        function processPayment(e) {
            e.preventDefault();
            let isValid = true;

            const name = document.getElementById('fullName');
            if (name.value.trim() === "") {
                showError(name, true);
                isValid = false;
            } else { showError(name, false); }

            const email = document.getElementById('email');
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email.value)) {
                showError(email, true);
                isValid = false;
            } else { showError(email, false); }

            const card = document.getElementById('cardNumber');
            if (card.value.length < 19) {
                showError(card, true);
                isValid = false;
            } else { showError(card, false); }

            if (isValid) {
                const btn = document.querySelector('#checkoutForm button[type="submit"]');
                const originalText = btn.innerText;
                btn.innerText = "Processing...";
                btn.disabled = true;
                btn.style.transform = 'scale(0.98)';

                setTimeout(() => {
                    // Success animation
                    btn.innerHTML = '‚úì Payment Successful!';
                    btn.style.background = 'linear-gradient(135deg, #10b981, #059669)';

                    setTimeout(() => {
                        alert("Thank you for your purchase! Your order has been confirmed.");
                        cart = [];
                        updateCartUI();
                        btn.innerText = originalText;
                        btn.disabled = false;
                        btn.style.background = '';
                        btn.style.transform = '';
                        closeCheckout();
                        document.getElementById('checkoutForm').reset();
                    }, 1000);
                }, 1500);
            }
        }

        function showError(input, show) {
            const errorMsg = input.nextElementSibling;
            if (show) {
                input.style.borderColor = '#f43f5e';
                input.classList.add('error');
                errorMsg.style.display = 'block';
            } else {
                input.style.borderColor = '#e2e8f0';
                input.classList.remove('error');
                errorMsg.style.display = 'none';
            }
        }

        /* 
         * ==========================================
         * UTILITIES
         * ==========================================
         */
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toastMessage');

            toastMessage.innerText = message;
            toast.className = 'toast show ' + type;

            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        function addToWishlist(id, btn) {
            btn.style.fill = '#f43f5e';
            btn.style.stroke = '#f43f5e';
            btn.style.transform = 'scale(1.2)';

            setTimeout(() => {
                btn.style.transform = 'scale(1)';
            }, 200);

            showToast('Added to wishlist!');
        }
    </script>
</body>

</html>